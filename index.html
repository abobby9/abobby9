<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  
  <!-- FORCE DESKTOP MODE ON MOBILE -->
  <meta name="viewport" content="width=1024">

  <title>A Bobby Education 9</title>
  <style>
    :root{
      --accent:#0f62fe;
      --muted:#666;
      --maxw:1200px;
      font-family: Arial, Helvetica, sans-serif;
    }

    /* FORCE DESKTOP MODE */
    html, body {
      min-width: 1024px !important;
      overflow-x: auto;
    }

    /* Page background */
    body{
      margin:0;
      min-height:100vh;
      background-image: url("https://raw.githubusercontent.com/abobby9/abobby9/main/Background.png");
      background-size: cover;
      background-position: center;
      display:flex;
      justify-content:center;
      padding:28px;
    }

    .wrap{
      width:100%;
      max-width:var(--maxw);
      background: rgba(255,255,255,0.70);
      border-radius:14px;
      padding:20px;
      box-shadow: 0 22px 50px rgba(0,0,0,0.25);
    }

    /* Header */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      background: rgba(255,255,255,0.45);
      padding:14px;
      border-radius:10px;
      margin-bottom:14px;
    }

    .logo{
      width:150px;
      height:150px;
      object-fit:contain;
      border-radius:12px;
      padding:8px;
      background:rgba(255,255,255,0.6);
      box-shadow:0 6px 18px rgba(0,0,0,0.18);
    }

    .photo{
      width:150px;
      height:150px;
      object-fit:cover;
      border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.18);
      border:3px solid rgba(255,255,255,0.6);
    }

    .title-area{ text-align:center; flex:1; }
    h1{ margin:0; font-size:44px; color:#0b2b5a; }
    .subtitle{ margin-top:8px; font-size:16px; color:#0b2b5a; font-style:italic; }

    /* Social buttons */
    .social-buttons{
      display:flex; justify-content:center; gap:14px; margin-top:12px;
    }
    .social-buttons a{
      padding:10px 18px;
      font-weight:700;
      color:white;
      text-decoration:none;
      border-radius:10px;
      box-shadow:0 6px 18px rgba(0,0,0,0.18);
    }
    .yt-btn{ background:#FF0000; }
    .ig-btn{ background:#C13584; }

    /* Search */
    .search-container { display:flex; justify-content:center; margin:16px 0; }
    .search-box { width:90%; max-width:700px; position:relative; }

    #searchInput {
      width:100%;
      padding:12px 50px 12px 18px;
      font-size:17px;
      border-radius:12px;
      border:2px solid #0b2b5a;
      outline:none;
      transition:0.2s;
      background:white;
    }
    #searchInput:focus{
      border-color:var(--accent);
      box-shadow:0 0 12px rgba(15,98,254,0.2);
    }

    .search-btn, .voice-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:transparent;
      border:none;
      cursor:pointer;
      font-size:20px;
      padding:6px;
      line-height:1;
    }
    .search-btn{ right:46px; }
    .voice-btn{ right:10px; }

    .voice-btn.listening{
      color:red;
      animation:pulse 1s infinite;
    }
    @keyframes pulse{
      0%{transform:translateY(-50%) scale(1);}
      50%{transform:translateY(-50%) scale(1.16);}
      100%{transform:translateY(-50%) scale(1);}
    }

    /* Filters */
    .filters-wrapper{ display:flex; justify-content:center; margin-bottom:12px; }
    .filters-btn{
      padding:10px 16px;
      font-weight:700;
      border-radius:10px;
      background:var(--accent);
      color:white;
      border:none;
      cursor:pointer;
    }
    .filters-panel{ position:relative; }
    .filters-dropdown{
      display:none;
      position:absolute;
      top:44px;
      right:0;
      width:360px;
      background:white;
      border-radius:10px;
      box-shadow:0 18px 40px rgba(0,0,0,0.2);
      padding:12px;
      z-index:50;
    }
    .filters-dropdown.open{ display:block; }

    .filters-row{ display:flex; gap:8px; margin:8px 0; align-items:center; }
    .filters-row label{ width:80px; font-size:13px; font-weight:700; color:#0b2b5a; }
    select, .small-input{
      padding:8px 10px;
      border-radius:8px;
      border:1px solid #ccc;
    }
    .filters-actions{ display:flex; justify-content:space-between; margin-top:12px; }

    .btn.clear{ background:#eee; border-radius:8px; padding:6px 10px; cursor:pointer; }
    .btn.apply{ background:#0f62fe; color:white; padding:6px 10px; border-radius:8px; cursor:pointer; }

    /* Card */
    .card{
      background:rgba(255,255,255,0.58);
      padding:16px;
      border-radius:12px;
      margin-bottom:18px;
    }

    .playlist-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:20px;
    }

    .playlist-card{
      width:240px;
      background:white;
      border-radius:12px;
      overflow:hidden;
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      cursor:pointer;
      transition:0.2s;
    }
    .playlist-card:hover{ transform:scale(1.05); }

    .playlist-thumb{
      width:100%;
      height:150px;
      object-fit:cover;
    }

    .playlist-title{
      padding:10px;
      font-weight:700;
      text-align:center;
      color:#0b2b5a;
    }

    /* Videos grid */
    .yt-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
    }

    .yt-item{
      background:white;
      border-radius:10px;
      overflow:hidden;
      box-shadow:0 6px 16px rgba(0,0,0,0.10);
      text-decoration:none;
      color:black;
      transition:0.2s;
    }
    .yt-item:hover{ transform:translateY(-4px); }

    .yt-thumb{
      width:100%;
      height:140px;
      object-fit:cover;
    }

    .yt-title{
      font-size:15px;
      font-weight:700;
      padding:10px;
    }

    .yt-meta{
      padding:0 10px 12px 10px;
      font-size:12px;
      color:gray;
      display:flex;
      gap:6px;
      flex-wrap:wrap;
    }

    .badge-short{
      background:black;
      color:white;
      padding:3px 6px;
      border-radius:8px;
    }

    /* Modal */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.6);
      display:none;
      justify-content:center;
      align-items:center;
      padding:20px;
      z-index:9999;
    }

    .modal-content{
      background:white;
      border-radius:12px;
      padding:16px;
      width:100%;
      max-width:1100px;
      max-height:90vh;
      overflow:auto;
    }

    .close-btn{
      float:right;
      cursor:pointer;
      font-size:20px;
      font-weight:bold;
    }

    footer{ text-align:center; color:#555; margin-top:10px; }
  </style>
</head>
<body>

  <div class="wrap">

    <!-- HEADER -->
    <header>
      <img class="logo" src="https://raw.githubusercontent.com/abobby9/abobby9/main/Logo.png">

      <div class="title-area">
        <h1>A Bobby Education 9</h1>
        <div class="subtitle">(Learn new things and increase your knowledge.)</div>

        <div class="social-buttons">
          <a class="yt-btn" href="https://www.youtube.com/@ABobbyEducation9" target="_blank">üì∫ YouTube</a>
          <a class="ig-btn" href="https://www.instagram.com/abobbyeducation9/" target="_blank">üì∑ Instagram</a>
        </div>
      </div>

      <img class="photo" src="https://raw.githubusercontent.com/abobby9/abobby9/main/Photo.png">
    </header>

    <!-- SEARCH -->
    <div class="search-container">
      <div class="search-box">
        <input id="searchInput" type="text" placeholder="Search everything... (Enter or üîç)" oninput="onSearchInput()">
        <button class="search-btn" onclick="triggerSearch()">üîç</button>
        <button class="voice-btn" onclick="startVoiceSearch()">üé§</button>
      </div>
    </div>

    <!-- FILTERS -->
    <div class="filters-wrapper">
      <div class="filters-panel">
        <button class="filters-btn" id="filtersBtn">Filters ‚ñæ</button>

        <div class="filters-dropdown" id="filtersDropdown">

          <div class="filters-row">
            <label>Playlist</label>
            <select id="filterPlaylist">
              <option value="__all">All playlists</option>
            </select>
          </div>

          <div class="filters-row">
            <label>Duration</label>
            <select id="filterDuration">
              <option value="all">All</option>
              <option value="short">Short (‚â§60s)</option>
              <option value="medium">Medium (1‚Äì10 min)</option>
              <option value="long">Long (>10 min)</option>
            </select>
          </div>

          <div class="filters-row">
            <label>Year</label>
            <select id="filterYear">
              <option value="all">All</option>
            </select>
          </div>

          <div class="filters-row">
            <label>Match</label>
            <div class="checkbox-row">
              <input type="checkbox" id="matchDescription">
              <label for="matchDescription">Title & Description</label>
            </div>
          </div>

          <div class="filters-row">
            <label>Sort</label>
            <select id="filterSort">
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
              <option value="views">Most Viewed</option>
              <option value="alpha">Alphabetical</option>
            </select>
          </div>

          <div class="filters-actions">
            <button class="btn clear" id="clearFiltersBtn">Clear</button>
            <button class="btn apply" id="applyFiltersBtn">Apply</button>
          </div>

        </div>
      </div>
    </div>

    <!-- SEARCH RESULTS -->
    <div id="searchResults" class="card" style="display:none;">
      <h2>Search Results</h2>
      <div id="resultsGrid" class="yt-grid"></div>
    </div>

    <!-- PLAYLISTS -->
    <section class="card">
      <h2>Playlists</h2>
      <div id="playlistGrid" class="playlist-grid"></div>
      <div id="noPlaylists" class="muted" style="display:none;">No playlists found.</div>
    </section>

    <!-- ALL VIDEOS -->
    <section class="card">
      <h2>All Videos (including Shorts)</h2>
      <div id="allVideosGrid" class="yt-grid"></div>
      <div id="noVideos" class="muted" style="display:none;">No videos found.</div>
    </section>

    <!-- LIKE / SUBSCRIBE -->
    <section class="card">
      <h2 style="text-align:center;">Like, Subscribe and Share</h2>
    </section>

    <!-- CONTACT -->
    <section class="card">
      <h2>Contact</h2>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSdOpYn8VGVIslrUG5WpFYmh1StOrnCvBhNv2UJ1q4KHJNIplg/viewform"
         target="_blank"
         style="padding:12px 16px; background:#eee; display:inline-block; border-radius:10px; text-decoration:none; color:#0a376f;">
         Click here to Contact
      </a>
    </section>

    <footer>¬© <span id="year"></span> A Bobby Education 9</footer>
  </div>

  <!-- PLAYLIST MODAL -->
  <div id="playlistModal" class="modal">
    <div class="modal-content">
      <div style="display:flex; justify-content:space-between;">
        <h3 id="modalTitle"></h3>
        <div class="close-btn" id="closeModal">‚úï</div>
      </div>
      <div id="modalVideos" class="yt-grid" style="margin-top:14px;"></div>
    </div>
  </div>

  <script>
    /*********************************************
     * CONFIG
     *********************************************/
    const API_KEY = "AIzaSyAlOvNpWfbUcIayhbC2IcK4vtsRjUdpPWg";
    const CHANNEL_ID = "UC7VwSQ40PUY2eMlLRADq-LQ";
    const UPLOADS_PLAYLIST_ID = CHANNEL_ID.replace(/^UC/, "UU");

    /*********************************************
     * GLOBAL DATA
     *********************************************/
    const GLOBAL_DATA = { playlists: [], videos: [] };
    let CURRENT_FILTERS = {
      playlistId: "__all",
      duration: "all",
      year: "all",
      matchDescription: false,
      sort: "newest",
      searchTerm: ""
    };

    /*********************************************
     * UTILITIES
     *********************************************/
    function isoDurationToSeconds(iso){
      if(!iso) return 0;
      const m = iso.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
      const h = parseInt(m[1]||0,10);
      const min = parseInt(m[2]||0,10);
      const s = parseInt(m[3]||0,10);
      return h*3600 + min*60 + s;
    }

    function formatDuration(sec){
      if(sec<60) return sec+"s";
      const m = Math.floor(sec/60);
      const s = sec % 60;
      if(m<60) return m+":"+String(s).padStart(2,"0");
      const h = Math.floor(m/60);
      return h+":"+String(m%60).padStart(2,"0")+":"+String(s).padStart(2,"0");
    }

    function escapeHtml(s){
      return (s||"").replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]));
    }

    function debounce(fn,ms=300){
      let t;
      return (...args)=>{
        clearTimeout(t);
        t=setTimeout(()=>fn(...args),ms);
      };
    }

    /*********************************************
     * YOUTUBE FETCH HELPERS
     *********************************************/
    async function fetchJson(url){
      const r = await fetch(url);
      if(!r.ok) throw new Error("Err "+r.status);
      return r.json();
    }

    async function fetchPlaylists(){
      const grid = document.getElementById("playlistGrid");
      grid.innerHTML="Loading playlists‚Ä¶";

      const url=`https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId=${CHANNEL_ID}&maxResults=50&key=${API_KEY}`;
      const data=await fetchJson(url);

      GLOBAL_DATA.playlists=data.items||[];

      grid.innerHTML="";
      if(!GLOBAL_DATA.playlists.length){
        document.getElementById("noPlaylists").style.display="block";
      }

      GLOBAL_DATA.playlists.forEach(pl=>grid.appendChild(createPlaylistCard(pl)));

      populatePlaylistSelect();
    }

    async function fetchUploads(){
      const grid=document.getElementById("allVideosGrid");
      grid.innerHTML="Loading videos‚Ä¶";

      const url=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${UPLOADS_PLAYLIST_ID}&maxResults=50&key=${API_KEY}`;
      const data=await fetchJson(url);

      const ids=(data.items||[]).map(i=>i.snippet.resourceId.videoId);

      GLOBAL_DATA.videos = await fetchVideosDetails(ids);

      grid.innerHTML="";
      GLOBAL_DATA.videos.forEach(v=>grid.appendChild(createVideoCard(v)));

      populateYearSelect();
    }

    async function fetchVideosDetails(ids){
      const batches=[];
      for(let i=0;i<ids.length;i+=50) batches.push(ids.slice(i,i+50));

      const out=[];
      for(const b of batches){
        const url=`https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=${b.join(",")}&key=${API_KEY}`;
        const data=await fetchJson(url);
        out.push(...(data.items||[]));
      }
      return out;
    }

    async function fetchPlaylistVideos(id){
      const url=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${id}&maxResults=50&key=${API_KEY}`;
      const data=await fetchJson(url);
      const ids=(data.items||[]).map(i=>i.snippet.resourceId.videoId);
      return await fetchVideosDetails(ids);
    }

    /*********************************************
     * CREATE CARDS
     *********************************************/
    function createPlaylistCard(pl){
      const div=document.createElement("div");
      div.className="playlist-card";

      const thumb=pl.snippet.thumbnails.medium.url;

      div.innerHTML=`
        <img class="playlist-thumb" src="${thumb}">
        <div class="playlist-title">${escapeHtml(pl.snippet.title)}</div>
      `;
      div.onclick=()=>openPlaylist(pl.id,pl.snippet.title);
      return div;
    }

    function createVideoCard(v){
      const vid=v.id;
      const title=v.snippet.title;
      const thumb=v.snippet.thumbnails.high.url;
      const seconds=isoDurationToSeconds(v.contentDetails?.duration);
      const isShort=seconds<=60;

      const a=document.createElement("a");
      a.className="yt-item";
      a.href=`https://youtube.com/watch?v=${vid}`;
      a.target="_blank";

      a.innerHTML=`
        <img class="yt-thumb" src="${thumb}">
        <div class="yt-title">${escapeHtml(title)}</div>
        <div class="yt-meta">
          ${isShort?'<span class="badge-short">SHORT</span>':''}
          <span>${formatDuration(seconds)}</span>
          <span>${new Date(v.snippet.publishedAt).getFullYear()}</span>
          <span>${(v.statistics?.viewCount||0).toLocaleString()} views</span>
        </div>
      `;
      return a;
    }

    /*********************************************
     * POPULATE FILTER SELECTS
     *********************************************/
    function populatePlaylistSelect(){
      const sel=document.getElementById("filterPlaylist");
      GLOBAL_DATA.playlists.forEach(pl=>{
        const opt=document.createElement("option");
        opt.value=pl.id;
        opt.textContent=pl.snippet.title;
        sel.appendChild(opt);
      });
    }

    function populateYearSelect(){
      const sel=document.getElementById("filterYear");
      const years=[...new Set(GLOBAL_DATA.videos.map(v=>new Date(v.snippet.publishedAt).getFullYear()))]
        .sort((a,b)=>b-a);

      years.forEach(y=>{
        const opt=document.createElement("option");
        opt.value=y;
        opt.textContent=y;
        sel.appendChild(opt);
      });
    }

    /*********************************************
     * PLAYLIST MODAL
     *********************************************/
    const modal=document.getElementById("playlistModal");
    const modalVideos=document.getElementById("modalVideos");
    const modalTitle=document.getElementById("modalTitle");

    async function openPlaylist(id,title){
      modal.style.display="flex";
      modalVideos.innerHTML="Loading‚Ä¶";
      modalTitle.textContent=title;

      const videos=await fetchPlaylistVideos(id);
      modalVideos.innerHTML="";
      videos.forEach(v=>modalVideos.appendChild(createVideoCard(v)));
    }

    document.getElementById("closeModal").onclick=()=>{
      modal.style.display="none";
    };

    /*********************************************
     * SEARCH + FILTER LOGIC
     *********************************************/
    const onSearchInput = debounce(()=>{
      CURRENT_FILTERS.searchTerm=document.getElementById("searchInput").value.trim();
      applyFilters();
    },300);

    document.getElementById("searchInput").addEventListener("keydown", (e)=>{
      if(e.key==="Enter"){
        e.preventDefault();
        CURRENT_FILTERS.searchTerm=document.getElementById("searchInput").value.trim();
        applyFilters();
      }
    });

    function triggerSearch(){
      CURRENT_FILTERS.searchTerm=document.getElementById("searchInput").value.trim();
      applyFilters();
    }

    function startVoiceSearch(){
      const Recog=window.SpeechRecognition||window.webkitSpeechRecognition;
      if(!Recog) return alert("Voice search not supported!");

      const r=new Recog();
      const mic=document.querySelector(".voice-btn");

      r.onstart=()=>mic.classList.add("listening");
      r.onend=()=>mic.classList.remove("listening");

      r.onresult=(e)=>{
        const text=e.results[0][0].transcript;
        document.getElementById("searchInput").value=text;
        CURRENT_FILTERS.searchTerm=text;
        applyFilters();
      };

      r.start();
    }

    async function applyFilters(){
      const resultsSection=document.getElementById("searchResults");
      const grid=document.getElementById("resultsGrid");
      resultsSection.style.display="block";
      grid.innerHTML="Searching‚Ä¶";

      let videos=[...GLOBAL_DATA.videos];

      if(CURRENT_FILTERS.playlistId!=="__all"){
        videos=await fetchPlaylistVideos(CURRENT_FILTERS.playlistId);
      }

      const term=CURRENT_FILTERS.searchTerm.toLowerCase();

      videos=videos.filter(v=>{
        const title=v.snippet.title.toLowerCase();
        const desc=v.snippet.description.toLowerCase();
        if(term){
          if(CURRENT_FILTERS.matchDescription) return title.includes(term)||desc.includes(term);
          return title.includes(term);
        }
        return true;
      });

      videos=videos.filter(v=>{
        const sec=isoDurationToSeconds(v.contentDetails.duration);
        if(CURRENT_FILTERS.duration==="short") return sec<=60;
        if(CURRENT_FILTERS.duration==="medium") return sec>60&&sec<=600;
        if(CURRENT_FILTERS.duration==="long") return sec>600;
        return true;
      });

      if(CURRENT_FILTERS.year!=="all"){
        videos=videos.filter(v=>{
          return new Date(v.snippet.publishedAt).getFullYear()==CURRENT_FILTERS.year;
        });
      }

      if(CURRENT_FILTERS.sort==="newest"){
        videos.sort((a,b)=>new Date(b.snippet.publishedAt)-new Date(a.snippet.publishedAt));
      }
      if(CURRENT_FILTERS.sort==="oldest"){
        videos.sort((a,b)=>new Date(a.snippet.publishedAt)-new Date(b.snippet.publishedAt));
      }
      if(CURRENT_FILTERS.sort==="views"){
        videos.sort((a,b)=>(b.statistics?.viewCount||0)-(a.statistics?.viewCount||0));
      }
      if(CURRENT_FILTERS.sort==="alpha"){
        videos.sort((a,b)=>a.snippet.title.localeCompare(b.snippet.title));
      }

      grid.innerHTML="";
      if(!videos.length){
        grid.innerHTML="No results.";
        return;
      }

      videos.forEach(v=>grid.appendChild(createVideoCard(v)));
    }

    /*********************************************
     * FILTER BUTTON HANDLERS
     *********************************************/
    document.getElementById("filtersBtn").onclick=()=>{
      document.getElementById("filtersDropdown").classList.toggle("open");
    };

    document.getElementById("applyFiltersBtn").onclick=()=>{
      CURRENT_FILTERS.playlistId=document.getElementById("filterPlaylist").value;
      CURRENT_FILTERS.duration=document.getElementById("filterDuration").value;
      CURRENT_FILTERS.year=document.getElementById("filterYear").value;
      CURRENT_FILTERS.matchDescription=document.getElementById("matchDescription").checked;
      CURRENT_FILTERS.sort=document.getElementById("filterSort").value;

      document.getElementById("filtersDropdown").classList.remove("open");
      applyFilters();
    };

    document.getElementById("clearFiltersBtn").onclick=()=>{
      CURRENT_FILTERS={
        playlistId:"__all",
        duration:"all",
        year:"all",
        matchDescription:false,
        sort:"newest",
        searchTerm:CURRENT_FILTERS.searchTerm
      };

      document.getElementById("filterPlaylist").value="__all";
      document.getElementById("filterDuration").value="all";
      document.getElementById("filterYear").value="all";
      document.getElementById("matchDescription").checked=false;
      document.getElementById("filterSort").value="newest";

      applyFilters();
    };

    /*********************************************
     * INIT
     *********************************************/
    async function init(){
      document.getElementById("year").textContent=new Date().getFullYear();

      await fetchPlaylists();
      await fetchUploads();
    }
    init();

  </script>
</body>
</html>
